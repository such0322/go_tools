{{define "/admin/user/rules"}}
{{ template "header" . }}

<div class="container">
  <div class="rows">
    <div class="col-sm-12 ">
      <h2>用户角色</h2>
      <hr/>
      <br/>

      <table class="table">
        <tr>
          <th>ID</th>
          <th>角色</th>
          <th>状态</th>
          <th>操作</th>
        </tr>
        {{range .Roles}}
          {{ if ne .Status 0 }}
          <tr>
            <td>{{.ID}}</td>
            <td>{{.Name}}</td>
            <td>{{if .ID | inIntSlice $.UserRules}} 已分配{{end}}</td>
            <td>
              {{if .ID | inIntSlice $.UserRules}}
              <a class="btn btn-default btn-sm col-sm-offset-3 col-sm-3" href="/admin/user/{{$.UID}}/rules/del?rid={{.ID}}">取消</a>
              {{else}}
              <a class="btn btn-default btn-sm col-sm-3" href="/admin/user/{{$.UID}}/rules/add?rid={{.ID}}">分配</a>
              {{end}}
            </td>
          </tr>
          {{end}}
        {{end}}
      </table>
    </div>

  </div>
</div>

{{ template "footer" . }}
{{ end}}
